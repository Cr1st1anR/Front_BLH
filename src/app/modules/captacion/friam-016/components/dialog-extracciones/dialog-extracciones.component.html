<div class="card flex justify-center">
  <p-dialog [header]="getDialogTitle()" [modal]="true" [(visible)]="visible" [style]="{ width: '90rem' }"
    [breakpoints]="{ '1199px': '85vw', '575px': '95vw' }" [maximizable]="true" (onHide)="onHide()" [draggable]="false">

    <p-toast position="top-right" key="tr-dialog" />

    <!-- SPINNER DE CARGA -->
    @if (loading) {
    <div class="loading-overlay">
      <p-progress-spinner strokeWidth="8" fill="transparent" animationDuration="2s"
        [style]="{ width: '70px', height: '70px' }">
      </p-progress-spinner>
    </div>
    }

    <!-- CONTENIDO DEL DIALOG -->
    <div class="dialog-content">

      <!-- Información básica de la extracción -->
      <div class="info-section">
        <h3 class="section-title">Información del Registro</h3>

        <div class="info-grid">
          @for (info of getBasicInfo(); track $index) {
          <div class="info-item">
            <label>{{ info.label }}:</label>
            <span>{{ info.value }}</span>
          </div>
          }
        </div>

        <!-- Información de consejería -->
        <div class="consejeria-info">
          <div class="info-item full-width">
            <label>Consejería Recibida:</label>
            <span [class.no-data]="getConsejeriaInfo() === 'No especificada'">
              {{ getConsejeriaInfo() }}
            </span>
          </div>
        </div>
      </div>

      <!-- Sección de extracciones -->
      <div class="extracciones-section">
        <h3 class="section-title">Registro de Extracciones</h3>

        <!-- Botón para nueva extracción -->
        <new-register-extraccion
          (nuevaExtraccion)="onNuevaExtraccion()"
          [disabled]="isNewExtraccionButtonDisabled()">
        </new-register-extraccion>

        <!-- Tabla de extracciones -->
        <table-extraccion
          [idExtraccion]="rowData?.id_extraccion">
        </table-extraccion>
      </div>
    </div>

  </p-dialog>
</div>
